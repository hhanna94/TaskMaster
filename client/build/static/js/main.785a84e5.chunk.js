(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,s){},40:function(e,t,s){},65:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(32),l=s.n(n),i=(s(39),s(13)),r=s(2),o=(s(40),s(4)),d=s.n(o),j=s(3),m=s(5),b=s(0),u=function(e){var t=Object(j.f)(),s=e.toggleUpdate,c=e.setToggleUpdate,a=e.setLoggedInUser,n=e.loggedInUser;return Object(b.jsxs)("div",{className:"container d-flex justify-content-between align-items-center",children:[Object(b.jsx)("h1",{className:"align-self-end",children:"TaskMaster"}),Object(b.jsxs)("ul",{className:"nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(m.b,{className:"nav-link",to:"/home",children:"All Tasks"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(m.b,{className:"nav-link",to:"/tasks/new",children:"Create Task"})}),n.admin?Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)(m.b,{className:"nav-link",to:"/admin",children:"Admin"})}):"",n._id?Object(b.jsx)("button",{onClick:function(){d.a.get("http://localhost:8000/api/users/logout",{withCredentials:!0}).then((function(e){c(!s),a({}),t.push("/")})).catch((function(e){return console.log(e)}))},className:"ms-4 red-button align-self-center",children:"Logout"}):Object(b.jsx)(m.b,{to:"/",className:"ms-4 button blue-button align-self-center",children:"Login"})]})]})},h=s(12),O=s(7),x=s.p+"static/media/Z-A.a5761f6f.svg",p=s.p+"static/media/A-Z.bf0629e2.svg",g=s.p+"static/media/UpDown.160842ca.svg",f=function(e){var t=Object(c.useState)([]),s=Object(r.a)(t,2),a=s[0],n=s[1],l=e.filteredTasks,o=e.toggleReload,j=e.setToggleReload,u=Object(c.useState)(1),h=Object(r.a)(u,2),f=h[0],N=h[1],v=Object(c.useState)(5),y=Object(r.a)(v,2),w=y[0],k=y[1],S=Object(c.useState)({column:"priority",direction:!0}),C=Object(r.a)(S,2),T=C[0],D=C[1];function U(){var e=Math.ceil(l.length/w);return e>0?e:1}Object(c.useEffect)((function(){console.log("running"),P(f)}),[w,o,T]);var P=function(e){var t=document.getElementById("_next"),s=document.getElementById("_prev"),c=document.getElementById("page");e<1?e=1:e>U()&&(e=U());var a=(e-1)*w,r=a+w,o=function(){var e=T.column,t=T.direction,s=document.getElementById("priorityImg"),c=document.getElementById("statusImg");return"status"===e?s.src=g:c.src=g,t?("status"===e?c.src=p:s.src=p,Object(i.a)(l).sort((function(t,s){return t[e]>s[e]?1:-1}))):("status"===e?c.src=x:s.src=x,Object(i.a)(l).sort((function(t,s){return t[e]<s[e]?1:-1})))}().slice(a,r);n(o),c.innerHTML=e,s.style.visibility=1===e?"hidden":"visible",e===U()?t.style.visibility="hidden":t.style.visibility="visible",N(e)};return Object(b.jsxs)("div",{className:"container mt-5",children:[Object(b.jsxs)("p",{className:"me-4 mb-1 text-end",children:[Object(b.jsx)("strong",{children:"Total Tasks:"})," ",l.length]}),Object(b.jsxs)("table",{className:"table table-bordered border-dark text-center align-middle",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"col-3",children:"Task Name "}),Object(b.jsx)("th",{className:"col-1",children:"Due Date"}),Object(b.jsxs)("th",{className:"col-2",children:["Priority ",Object(b.jsx)("img",{id:"priorityImg",className:"ms-2",onClick:function(e){D({column:"priority",direction:!T.direction})},style:{width:"1em",height:"1em"},src:p})]}),Object(b.jsxs)("th",{className:"col-2",children:["Status ",Object(b.jsx)("img",{id:"statusImg",className:"ms-2",onClick:function(e){D({column:"status",direction:!T.direction})},style:{width:"1em",height:"1em"},src:g})]}),Object(b.jsx)("th",{className:"col-2",children:"Assigned To"}),Object(b.jsx)("th",{className:"col-2",colSpan:"2",children:"Actions"})]})}),Object(b.jsxs)("tbody",{children:[a.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:Object(b.jsx)(m.b,{to:"/tasks/".concat(e._id),children:e.taskName})}),Object(b.jsx)("td",{children:new Date(e.dueDate).toLocaleDateString("en-US",{timeZone:"UTC"})}),Object(b.jsx)("td",{children:e.priority}),Object(b.jsx)("td",{children:e.status}),Object(b.jsxs)("td",{children:[e.assignTo.firstName," ",e.assignTo.lastName]}),Object(b.jsx)("td",{className:"col-1",children:Object(b.jsx)(m.b,{className:"button blue-button px-4 py-1",to:"/tasks/".concat(e._id,"/edit"),children:"Edit"})}),Object(b.jsx)("td",{children:"Completed"!==e.status?Object(b.jsx)("button",{onClick:function(t){!function(e){var t=Object(O.a)(Object(O.a)({},e),{},{status:"Completed"});d.a.put("http://localhost:8000/api/tasks/".concat(e._id),t).then((function(e){j(!o)})).catch((function(e){return console.log(e)}))}(e)},className:"red-button",children:"Complete"}):Object(b.jsx)("button",{className:"button btn-secondary",disabled:!0,children:"Complete"})})]},t)})),!a.length>0?Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:"6",children:"No results found, trying changing your filters."})}):Object(b.jsx)("tr",{style:{display:"none"}})]}),Object(b.jsx)("tfoot",{})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(b.jsxs)("div",{className:"d-flex gap-3 align-items-center",children:[Object(b.jsx)("button",{onClick:function(){f>1&&P(f-1)},id:"_prev",className:" red-button",children:"Previous"}),Object(b.jsxs)("label",{children:["Current Page: ",Object(b.jsx)("span",{id:"page"})]}),Object(b.jsx)("button",{id:"_next",onClick:function(){f<U()&&P(f+1)},className:" blue-button",children:"Next"})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:"me-3",children:"Rows per Page: "}),Object(b.jsx)("select",{onChange:function(e){k(parseInt(e.target.value))},name:"taskPerPageSelect",id:"taskPerPageSelect",className:"py-0",children:[5,10,25,50].map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))})]})]})]})},N=function(e){var t=(new Date).toLocaleDateString("en-CA",{timeZone:"EST"}),s=e.users,a=e.status,n=e.priorities,l=e.loggedInUser,i=Object(c.useState)([]),o=Object(r.a)(i,2),j=o[0],m=o[1],u=Object(c.useState)(!1),x=Object(r.a)(u,2),p=x[0],g=x[1],N=Object(c.useState)(!1),v=Object(r.a)(N,2),y=v[0],w=v[1],k=Object(c.useState)({assignTo:l._id,priority:"All",dueDate:t,status:"In Progress"}),S=Object(r.a)(k,2),C=S[0],T=S[1];Object(c.useEffect)((function(){w(!1),d.a.get("http://localhost:8000/api/tasks/".concat(C.priority,"/").concat(C.dueDate,"/").concat(C.status,"/").concat(C.assignTo)).then((function(e){m(e.data),w(!0)})).catch((function(e){return console.log(e)}))}),[C,p]);var D=function(e){T(Object(O.a)(Object(O.a)({},C),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{className:"text-center fw-bold",children:"All Tasks"}),Object(b.jsxs)("div",{className:"container w-75",children:[Object(b.jsx)("h5",{children:"Filters:"}),Object(b.jsxs)("div",{className:"ps-5 d-flex flex-wrap justify-content-between align-items-start",children:[Object(b.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(b.jsx)("label",{className:"me-2 col-3",htmlFor:"assignTo",children:"Assign To: "}),Object(b.jsxs)("select",{onChange:D,className:"form-select py-0 w-50",name:"assignTo",id:"assignTo",value:C.assignTo,children:[Object(b.jsx)("option",{value:"All",children:"All"}),s.map((function(e,t){return Object(b.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},t)}))]})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(b.jsx)("label",{className:"me-2 col-2",htmlFor:"priority",children:"Priority: "}),Object(b.jsxs)("select",{onChange:D,className:"form-select py-0 w-50",name:"priority",id:"priority",value:C.priority,children:[Object(b.jsx)("option",{value:"All",children:"All"}),n.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center col-6 mt-3",children:[Object(b.jsx)("label",{className:"me-2 col-3",htmlFor:"dueDate",children:"Due Date:"}),Object(b.jsx)("input",{onChange:D,className:"form-control py-0 w-50",type:"date",name:"dueDate",id:"dueDate",value:C.dueDate})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center col-6 mt-3",children:[Object(b.jsx)("label",{className:"me-2 col-2",htmlFor:"status",children:"Status: "}),Object(b.jsxs)("select",{onChange:D,className:"form-select py-0 w-50",name:"status",id:"status",value:C.status,children:[a.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)})),Object(b.jsx)("option",{value:"All",children:"All"})]})]})]})]}),y&&Object(b.jsx)(f,{toggleReload:p,setToggleReload:g,filteredTasks:j})]})},v=function(e){var t=e.departments,s=e.toggleUpdate,a=e.setToggleUpdate,n={firstName:"",lastName:"",department:"",email:" ",password:"",confirmPassword:"",admin:!1},l=Object(c.useState)(n),o=Object(r.a)(l,2),j=o[0],m=o[1],u=Object(c.useState)(!1),g=Object(r.a)(u,2),f=g[0],N=g[1],v=Object(c.useState)({}),y=Object(r.a)(v,2),w=y[0],k=y[1],S=Object(c.useState)([]),C=Object(r.a)(S,2),T=C[0],D=C[1],U=Object(c.useState)(!1),P=Object(r.a)(U,2),I=P[0],E=P[1],A=Object(c.useState)("create"),F=Object(r.a)(A,2),_=F[0],L=F[1],B=Object(c.useState)(!0),M=Object(r.a)(B,2),Z=M[0],R=M[1],H=function(e){var t;t="checkbox"===e.target.type?!j.admin:e.target.value,m(Object(O.a)(Object(O.a)({},j),{},Object(h.a)({},e.target.name,t)))},J=function(){if("create"===_){var e={};return T.forEach((function(t){e[t.email]=1})),e}}();return Object(c.useEffect)((function(){d.a.get("http://localhost:8000/api/users").then((function(e){D(e.data),E(!0)})).catch((function(e){return console.log(e)}))}),[f]),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{className:"mb-2",children:"Admin"}),Object(b.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{className:"text-center",children:"Users"}),Object(b.jsxs)("table",{style:{minWidth:"30vw"},className:"mt-4 table table-striped table-bordered border-dark text-center align-middle",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"col-4",children:"Name"}),Object(b.jsxs)("td",{className:"col-4",children:["Department ",Object(b.jsx)("img",{id:"departmentImg",className:"ms-2",onClick:function(e){R(!Z)},style:{width:"1em",height:"1em"},src:p})]}),Object(b.jsx)("td",{className:"col-4",colSpan:"2",children:"Actions"})]})}),Object(b.jsx)("tbody",{children:I&&function(){var e=document.getElementById("departmentImg");return Z?(e.src=p,Object(i.a)(T).sort((function(e,t){return e.department>t.department?1:-1}))):(e.src=x,Object(i.a)(T).sort((function(e,t){return e.department<t.department?1:-1})))}().map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[e.firstName," ",e.lastName]}),Object(b.jsx)("td",{children:e.department}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){!function(e){L("edit"),m(e)}(e)},className:"button blue-button",children:"Edit"})}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{className:"button red-button",onClick:function(){var t;t=e._id,d.a.delete("http://localhost:8000/api/users/".concat(t)).then((function(e){console.log(e),N(!f)})).catch((function(e){return console.log(e)}))},children:"Delete"})})]},t)}))})]})]}),Object(b.jsxs)("div",{style:{width:"22vw"},children:["create"===_?Object(b.jsx)("h4",{className:"text-center",children:"Create a User"}):Object(b.jsx)("h4",{className:"text-center",children:"Edit User"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"create"===_?d.a.post("http://localhost:8000/api/users",j).then((function(e){console.log(e),e.data.userExists?k(e.data):(k({}),m(n),N(!f))})).catch((function(e){k(e.response.data.errors)})):d.a.put("http://localhost:8000/api/users/".concat(j._id),j).then((function(e){e.data.userExists?k(e.data):(k({}),m(n),N(!f),L("create"))})).catch((function(e){k(e.response.data.errors)})),a(!s)},className:"mt-4",children:[Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"firstName",className:"col-5 col-form-label",children:"First Name: "}),Object(b.jsx)("input",{onChange:H,type:"text",className:"form-control",id:"firstName",name:"firstName",value:j.firstName})]}),w.firstName?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.firstName.message," "]}):"",Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"lastName",className:"col-5 col-form-label",children:"Last Name: "}),Object(b.jsx)("input",{onChange:H,type:"text",className:"form-control",id:"lastName",name:"lastName",value:j.lastName})]}),w.lastName?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.lastName.message," "]}):"",Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"department",className:"col-5 col-form-label",children:"Department: "}),Object(b.jsxs)("select",{onChange:H,name:"department",className:"form-select",value:j.department,children:[Object(b.jsx)("option",{value:"",children:"---"}),t.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})]}),w.department?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.department.message," "]}):"",Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"email",className:"col-5 col-form-label",children:"Email: "}),Object(b.jsx)("input",{onChange:H,type:"email",name:"email",id:"email",className:"form-control",value:j.email})]}),w.email?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.email.message," "]}):"","create"===_&&J[j.email]?Object(b.jsx)("p",{className:"text-danger",children:"*Email is already in use. "}):"",w.userExists?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.userExists," "]}):"","create"===_?Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"password",className:"col-5 col-form-label",children:"Password: "}),Object(b.jsx)("input",{onChange:H,type:"password",name:"password",id:"password",className:"form-control",value:j.password})]}):"",w.password?Object(b.jsxs)("p",{className:"text-danger",children:["*",w.password.message," "]}):"","create"===_?Object(b.jsxs)("div",{className:"formDiv",children:[Object(b.jsx)("label",{htmlFor:"confirmPassword",className:"col-5 col-form-label",children:"Confirm Password: "}),Object(b.jsx)("input",{onChange:H,type:"password",name:"confirmPassword",id:"confirmPassword",className:"form-control",value:j.confirmPassword})]}):"","create"===_&&j.password!==j.confirmPassword&&j.confirmPassword.length>0?Object(b.jsx)("p",{className:"text-danger",children:"*Passwords must match."}):"",Object(b.jsxs)("div",{className:"formDiv justify-content-between",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{htmlFor:"admin",className:"col-form-label me-2",children:"Admin?"}),Object(b.jsx)("input",{onChange:H,type:"checkbox",name:"admin",id:"admin",checked:j.admin})]}),"create"===_?Object(b.jsx)("input",{className:"button blue-button",type:"submit",value:"Create User"}):Object(b.jsx)("input",{className:"button blue-button",type:"submit",value:"Edit User"})]})]})]})]})]})},y=function(e){var t=Object(c.useState)({email:"",password:""}),s=Object(r.a)(t,2),a=s[0],n=s[1],l=Object(c.useState)({}),i=Object(r.a)(l,2),o=i[0],m=i[1],u=Object(j.f)(),x=e.toggleUpdate,p=e.setToggleUpdate,g=function(e){n(Object(O.a)(Object(O.a)({},a),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)("div",{className:"container w-50",children:[Object(b.jsx)("h3",{children:"Login"}),o.invalidAttempt?Object(b.jsx)("p",{className:"text-danger text-center",children:o.invalidAttempt}):"",Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d.a.post("http://localhost:8000/api/login",a,{withCredentials:!0}).then((function(e){"success!"===e.data.msg?(p(!x),u.push("/home")):m(e.data)})).catch((function(e){return console.log(e)}))},className:"mt-4 container w-25",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3",children:[Object(b.jsx)("label",{htmlFor:"email",className:"col-sm-5 col-form-label",children:"Email: "}),Object(b.jsx)("input",{onChange:g,type:"text",className:"form-control col-sm-7",id:"email",name:"email",value:a.email})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3 align-items-center",children:[Object(b.jsx)("label",{htmlFor:"password",className:"col-sm-5 col-form-label",children:"Password: "}),Object(b.jsx)("input",{onChange:g,type:"password",className:"form-control col-sm-7",id:"password",name:"password",value:a.password})]}),Object(b.jsx)("div",{className:"d-flex justify-content-center",children:Object(b.jsx)("input",{className:"button blue-button",type:"submit",value:"Login"})})]})]})},w=function(e){var t=e.onSubmitProp,s=e.errors,a=e.defaultTask,n=e.parent,l=e.users,i=e.status,o=e.priorities,d=e.loggedInUser,j=Object(c.useState)(!1),m=Object(r.a)(j,2),u=m[0],x=m[1],p=Object(c.useState)(a),g=Object(r.a)(p,2),f=g[0],N=g[1],v=function(e){N(Object(O.a)(Object(O.a)({},f),{},Object(h.a)({},e.target.name,e.target.value))),x(!1)};return Object(b.jsx)("div",{className:"container w-25",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=f.history,c=new Date,a="".concat(d.firstName," ").concat(d.lastName);s.push({description:f.description,time:c,editor:a}),t(f),x(!0)},className:"mt-4 container",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3 ",children:[Object(b.jsx)("label",{htmlFor:"taskName",className:"col-4 col-form-label",children:"Task Name: "}),Object(b.jsx)("input",{onChange:v,type:"text",className:"form-control",id:"taskName",name:"taskName",value:f.taskName})]}),s.taskName?Object(b.jsxs)("p",{className:"text-danger",children:["*",s.taskName.message]}):"",Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3 align-items-center",children:[Object(b.jsx)("label",{htmlFor:"description",className:"col-sm-4 col-form-label",children:"Comment: "}),Object(b.jsx)("textarea",{onChange:v,name:"description",id:"description",className:"form-control",value:f.description})]}),s.description?Object(b.jsxs)("p",{className:"text-danger",children:["*",s.description.message]}):"",Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3",children:[Object(b.jsx)("label",{htmlFor:"dueDate",className:"col-sm-4 col-form-label",children:"Due Date: "}),Object(b.jsx)("input",{onChange:v,type:"date",className:"form-control",id:"dueDate",name:"dueDate",value:new Date(f.dueDate).toLocaleDateString("en-CA",{timeZone:"UTC"})})]}),s.dueDate?Object(b.jsxs)("p",{className:"text-danger",children:["*",s.dueDate.message]}):"",Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3",children:[Object(b.jsx)("label",{htmlFor:"priority",className:"col-sm-4 col-form-label",children:"Priority: "}),Object(b.jsxs)("select",{onChange:v,name:"priority",id:"priority",className:"form-select",value:f.priority,children:[Object(b.jsx)("option",{value:"",children:"---"}),o.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))]})]}),s.priority?Object(b.jsxs)("p",{className:"text-danger",children:["*",s.priority.message]}):"",Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3",children:[Object(b.jsx)("label",{htmlFor:"assignTo",className:"col-sm-4 col-form-label",children:"Assign To: "}),Object(b.jsxs)("select",{onChange:v,name:"assignTo",id:"assignTo",className:"form-select",value:f.assignTo._id,children:[Object(b.jsx)("option",{value:"",children:"---"}),l.map((function(e,t){return Object(b.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},t)}))]})]}),s.assignTo?Object(b.jsx)("p",{className:"text-danger",children:"*Must choose a user to assign the task to."}):"","edit"===n?Object(b.jsxs)("div",{className:"d-flex justify-content-center mb-3",children:[Object(b.jsx)("label",{htmlFor:"status",className:"col-sm-4 col-form-label",children:"Status: "}),Object(b.jsx)("select",{onChange:v,name:"status",id:"status",className:"form-select",value:f.status,children:i.map((function(e,t){return Object(b.jsx)("option",{value:e,children:e},t)}))})]}):"",u?Object(b.jsx)("p",{className:"text-success text-center",children:"**Task saved successfully.**"}):"",Object(b.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(b.jsx)("input",{className:"button blue-button",type:"submit",value:"edit"===n?"Edit Task":"Create Task"})})]})})},k=function(e){var t=(new Date).toLocaleDateString("en-CA",{timeZone:"EST"}),s=e.loggedInUser,a=e.users,n=e.status,l=e.priorities,i=Object(c.useState)({}),o=Object(r.a)(i,2),m=o[0],u=o[1],h={taskName:"",description:"",dueDate:t,priority:"",assignTo:"",createdBy:s._id,status:"In Progress",history:[]},O=Object(j.f)();return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Create a New Task"}),Object(b.jsx)(w,{loggedInUser:s,priorities:l,status:n,users:a,onSubmitProp:function(e){d.a.post("http://localhost:8000/api/tasks",e).then((function(e){O.goBack()})).catch((function(e){return u(e.response.data.errors)}))},errors:m,defaultTask:h,parent:"create"})]})},S=function(e){var t=Object(j.g)().id,s=e.users,a=e.status,n=e.priorities,l=e.loggedInUser,i=Object(c.useState)({}),o=Object(r.a)(i,2),m=o[0],u=o[1],h=Object(c.useState)(!1),O=Object(r.a)(h,2),x=O[0],p=O[1],g=Object(c.useState)({}),f=Object(r.a)(g,2),N=f[0],v=f[1],y=Object(j.f)();Object(c.useEffect)((function(){d.a.get("http://localhost:8000/api/tasks/".concat(t)).then((function(e){u(e.data[0]),p(!0)})).catch((function(e){return console.log(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Edit Task"}),x&&Object(b.jsx)(w,{loggedInUser:l,priorities:n,status:a,users:s,onSubmitProp:function(e){d.a.put("http://localhost:8000/api/tasks/".concat(t),e).then((function(e){return y.goBack()})).catch((function(e){return v(e.response.data.errors)}))},errors:N,defaultTask:m,parent:"edit"})]})},C=function(e){var t=e.task;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between gap-3",children:[Object(b.jsxs)("div",{className:"mt-3 w-50 border-end pe-3",children:[Object(b.jsx)("h3",{children:"Task Details"}),Object(b.jsxs)("div",{className:"d-flex align-items-center mt-4",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Title: "})}),Object(b.jsx)("p",{children:t.taskName})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Assigned To: "})}),Object(b.jsxs)("p",{className:"",children:[t.assignTo.firstName," ",t.assignTo.lastName]})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Due Date: "})}),Object(b.jsx)("p",{className:"",children:new Date(t.dueDate).toLocaleDateString("en-US",{timeZone:"UTC"})})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Priority: "})}),Object(b.jsx)("p",{className:"",children:t.priority})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Status: "})}),Object(b.jsx)("p",{className:"",children:t.status})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Comment: "})}),Object(b.jsx)("p",{className:"col-9",children:t.description})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("p",{className:"col-3",children:Object(b.jsx)("strong",{children:"Created By: "})}),Object(b.jsxs)("p",{className:"",children:[t.createdBy.firstName," ",t.createdBy.lastName]})]})]}),Object(b.jsxs)("div",{className:"mt-3 w-50 ps-3",children:[Object(b.jsx)("h3",{children:"Comment History"}),Object(b.jsx)("div",{className:"mt-4",children:t.history.length>0?t.history.map((function(e,t){return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{className:"mb-0 fw-bold",children:[new Date(e.time).toLocaleDateString("en-US")," ",new Date(e.time).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),Object(b.jsxs)("p",{className:"ps-4 mt-0",children:[e.description," - ",e.editor]})]},t)})):Object(b.jsx)("p",{children:"No history available."})})]})]}),Object(b.jsx)(m.b,{to:"/tasks/".concat(t._id,"/edit"),className:"blue-button button",children:"Edit"})]})},T=function(){var e=Object(j.g)().id,t=Object(c.useState)({}),s=Object(r.a)(t,2),a=s[0],n=s[1],l=Object(c.useState)(!1),i=Object(r.a)(l,2),o=i[0],m=i[1];return Object(c.useEffect)((function(){d.a.get("http://localhost:8000/api/tasks/".concat(e)).then((function(e){n(e.data[0]),m(!0)})).catch((function(e){return console.log(e)}))}),[]),Object(b.jsx)("div",{className:"container w-50",children:o&&Object(b.jsx)(C,{task:a})})};var D=function(){var e=Object(c.useState)({}),t=Object(r.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(!1),l=Object(r.a)(n,2),o=l[0],h=l[1],O=Object(c.useState)([]),x=Object(r.a)(O,2),p=x[0],g=x[1],f=["In Progress","Completed"],w=["Low","Medium","High","Urgent"];return Object(c.useEffect)((function(){d.a.get("http://localhost:8000/api/users/loggedInUser",{withCredentials:!0}).then((function(e){a(e.data)})).catch((function(e){return console.log(e)}))}),[o]),Object(c.useEffect)((function(){d.a.get("http://localhost:8000/api/users").then((function(e){g(Object(i.a)(e.data).sort((function(e,t){return e.firstName>t.firstName?1:-1})))})).catch((function(e){return console.log(e)}))}),[s]),Object(b.jsx)("div",{className:"App pt-3",children:Object(b.jsx)("div",{children:Object(b.jsxs)(m.a,{children:[Object(b.jsx)(u,{toggleUpdate:o,setToggleUpdate:h,loggedInUser:s,setLoggedInUser:a}),Object(b.jsx)("div",{className:"card mt-3 p-4",children:Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{exact:!0,path:"/",children:Object(b.jsx)(y,{toggleUpdate:o,setToggleUpdate:h})}),Object(b.jsx)(j.a,{exact:!0,path:"/home",children:s._id?Object(b.jsx)(N,{priorities:w,status:f,users:p,loggedInUser:s}):Object(b.jsx)(m.b,{className:"text-center",to:"/",children:"Please login to continue."})}),Object(b.jsx)(j.a,{exact:!0,path:"/tasks/new",children:s._id?Object(b.jsx)(k,{priorities:w,status:f,users:p,loggedInUser:s}):Object(b.jsx)(m.b,{className:"text-center",to:"/",children:"Please login to continue."})}),Object(b.jsx)(j.a,{exact:!0,path:"/tasks/:id/edit",children:s._id?Object(b.jsx)(S,{priorities:w,status:f,users:p,loggedInUser:s}):Object(b.jsx)(m.b,{className:"text-center",to:"/",children:"Please login to continue."})}),Object(b.jsx)(j.a,{exact:!0,path:"/tasks/:id",children:s._id?Object(b.jsx)(T,{loggedInUser:s}):Object(b.jsx)(m.b,{className:"text-center",to:"/",children:"Please login to continue."})}),Object(b.jsx)(j.a,{path:"/admin",children:s.admin?Object(b.jsx)(v,{departments:["Accounting","Marketing","Operations","Sales"],toggleUpdate:o,setToggleUpdate:h}):Object(b.jsx)("h4",{className:"text-center",children:"Must be an admin to access this page."})})]})})]})})})},U=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,66)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,l=t.getTTFB;s(e),c(e),a(e),n(e),l(e)}))};l.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),U()}},[[65,1,2]]]);
//# sourceMappingURL=main.785a84e5.chunk.js.map